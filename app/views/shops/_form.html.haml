-content_for :head do
  !=import_google_api

  :javascript 
  
    google.load("maps", "2");
    google.setOnLoadCallback(initialize_shop_form_map);
    
    $(function() { // page ready   


      $('#shop_street_address').change(function(e) { 
        var address = $('#shop_street_address').val();
        if ($('#shop_postal_address').val() == "") {
          $('#shop_postal_address').val(address);
        }
        geocode(address, $('#shop_name').val());
      })
      
      $('#shop_name').change(function(e) {
        website = $("#shop_website")
        if (website.val() == "") {
          website.val(toShopUrl($(this).val()));
        } 
      })
      

    })

-semantic_form_for @shop, :html=>{:multipart=>true} do |f|
  -f.inputs do
    =f.input :name, :hint=>"Restaurant's full name"
    =f.input :street_address, :hint=>"Physical location of the restaurant"
    =f.input :postal_address, :hint=>"For snail mail"
    =f.input :email_address, :hint=>"For enquiries or bookings"
    =f.input :website, :hint=>"If one exists"
    =f.input :phone, :hint=>"To call for bookings"
    =f.input :fax, :hint=>"If available"
    =f.input :lat, :as=>:hidden
    =f.input :lng, :as=>:hidden 
    =f.input :header_background, :hint=>"Upload an image to appear above the shop's menu"
    =f.input :franchise, :hint=>"Does the shop belong to one of these franchises?", :collection=>Cuisine.is_franchise
    =f.input :cuisines, :as=>:check_boxes, :hint=>"What are your specialities", :collection=>Cuisine.is_not_franchise
  =f.buttons
  
-content_for :aside do
  #map(style="width: 310px; height:500px")
