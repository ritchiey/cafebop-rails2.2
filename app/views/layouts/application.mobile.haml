!!! Strict
%html{ "xml:lang" => "en", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %title Cafebop
    %meta{ :content => "text/html; charset=utf-8", "http-equiv" => "content-type" }
    %meta#viewport{ :name => "viewport", :content => "width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" }
    = @page_title
    %script{ :src => "http://www.google.com/jsapi", :type => "text/javascript" }
    %script{ :type => "text/javascript" }
    :javascript
      google.load("jquery", "1.3.2");
      
      var user = '#{current_user ? current_user.name : ""}';
      
    = javascript_include_tag '/jqtouch/jqtouch.js', 'mobile', :cache=>true
    = stylesheet_link_tag '/jqtouch/jqtouch.min.css', '/themes/apple/theme.min.css', 'mobile', :cache=>true
    

  %body
    
    / Home page
    #home.current
      .toolbar
        %h1 Cafebop
        %a#login-button.button.slideup{:href=>"#login"} Login
        %a#logout-button.button{:href=>"#"} Logout

      .authenticated.hidden
        %h1 My Restaurants
        %ul.my-restaurants
          %li
            Loading...
        .info
          The mobile version of the site currently only supports
          shop queue management. To place an order, please use the #{link_to "full site", root_url(:mobile => 0), :rel => "external" }

      .unauthenticated.hidden
        %h1 Cafebop


            
            
    / Login Form
    -form_for UserSession.new, :html=>{:id=>'login'} do |f|
      .toolbar
        %a.back Back
        %h1 Cafebop - login
      %ul.rounded
        %li
          =f.text_field :email, :placeholder=>"Email Address"
          -#%input{:name=>'email', :type=>'text', :placeholder=>'Email Address', :id=>'email'}
        %li
          =f.password_field :password, :placeholder=>"Password"
          -#%input{:name=>'password', :type=>'password', :placeholder=>'Password', :id=>'password'} 
      %a.whiteButton.login Login    
      %a.grayButton.goback Cancel
      

    / Show Shop
    #show-shop
      .toolbar
        %a.back Back
        %h1.title Loading...
      %h1 Customer Queues
      %ul#customer_queues.item-list
        %li
          Loading...
      .info
        Mobile ordering coming soon


    #show-customer-queue
      .toolbar
        %a.back Back
        %h1.title Loading...
      %ul#current_orders.item-list
        %li.arrow
          Loading...

    / Show Kitchen Queue
    #show-queue
      %h1 Queue
      %ul#orders
    
    
    / Show Order
    #show-queued-order
      .toolbar
        %a.back Back
        %h1.title Loading...
      %h2.order-status
      %h2.order-received
      -form_tag '', :method=>:put do |f|
        %a.grayButton.make-all-items.hidden Make All Items
        %a.grayButton.deliver.hidden Deliver
        / %a.whiteButton.no-show No Show
      %ul#summarized-order-items.item-list.rounded
      %p.total
      .order-controls
        -form_tag '', :method=>:put do |f|
          %a.whiteButton.cancel-order Cancel
          %a.whiteButton.no-show.hidden No Show
        
          
          
    / Show Order Item      
    #show-queued-order-item
      .toolbar
        %a.back Back
        %h1 Order Item
      %h1.item-details
      %h2.item-notes
      -form_tag "/queued_order_items/make_all", :method=>:put, :id=>'make-order-item-form' do |f|
        .order-items
        %a.whiteButton.make Make
       
